---
layout: post
title:  "JVM"
date:   2016-09-04 19:45:04
categories: jekyll update
---
crash 日志 工作目录（启动目录），hs_err_pid<pid>.log
为当前用户开启core dump，ulimit -c unlimited

垃圾收集器
新生代的基本思路是复制算法，老年代的基本思路是标记清除。
当前线上机器的相关参数是 

`-XX:+UseParNewGC -XX:+UseConcMarkSweepGC`

第一个表示对于新生代，采用并行复制算法（parallel copying collector），这一算法将比原始复制算法（(original) copying collector）提升n倍，n为可用的CPU数。
第二个参数启用时，将开启第一个参数。第二个参数表示对于老年代，采用“Concurrent Mark-Sweep GC,CMS收集器”，这个收集器除了收集时并行，还会与工作线程并发执行，从而尽可能降低Stop-The-World时间。

`-Xloggc:/data/applogs/heap_trace.txt`
这个参数表示把垃圾收集的统计数据直接输出到文件

初始堆空间大小配置通用法则：
1、Xms和Xmx设置为老年代活跃数据大小的3~4倍；
2、永久带的初始值PermSize及最大值MaxPermSize设置为永久带活跃数据大小的1.2~1.5倍；
3、新生代空间应该为老年代空间活跃数据的1~1.5倍

参考文档：  
<http://www.javaperformancetuning.com/news/qotm026.shtml>


