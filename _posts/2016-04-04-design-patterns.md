---
layout: post
title:  "设计模式-代理模式"
date:   2016-04-03 10:52:56
categories: jekyll update
---
#这是一级标题

# 这是一级标题带空格

##这是二级标题

## 这是二级标题带空格

###这是三级标题

### 这是三级标题带空格


## 代理模式

它的定义是这么说的：代理模式为另一个对象提供替身或占位符以控制对这个对象的访问。既然不是“直接”控制对象，而是通过增加一层包装，那么这层包装有什么用处呢？主要有以下三种：  
1、远程代理控制访问远程对象；  
2、虚拟代理控制访问创建开销大的资源；  
3、保护代理基于权限控制对资源的访问。

实现远程代理，最原始的方法是使用jdk内置的RMI工具，可以在一个JVM中调用另一个JVM中的对象的方法。  

远程代理是从设计模式的角度描述这个过程，但它更广为人知的名称叫做<远程过程调用>（RPC）。RPC简单来说就是解决这样一件事情，在机器A上想调用某个服务（对象）的某个方法，但这个服务本身是在机器B上（或者机器A的另外一个进程里），所以A对该服务的调用，需要转发到B的对应服务上，转发通常是：序列化-网络传输-反序列化，B调用完之后，将结果以同样的通道传给A，从而完成一次调用。

特地看了一下点评的pigeon，它的体系结构如下：

![pigeon](/images/pigeon.png)

可以看到一次调用经过了类似网络7层结构栈的从最顶层到最底层，再从最底层到最顶层的路径。pigeon做了代理的创建，路由，线程管理等，在网络通信层使用了netty。netty是一个高性能，异步事件驱动的NIO框架，由于性能高，获得广泛应用。参见[Netty系列之Netty高性能之道]。

而RMI的所有调用均是同步阻塞式的。

相比RMI，pigeon做到了高性能和简单易用。

有必要研究一下netty。

[Netty系列之Netty高性能之道]:http://www.infoq.com/cn/articles/netty-high-performance/
